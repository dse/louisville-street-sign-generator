$font-line-height: 1 !default;
$font-padding-top: 0 !default;
$sup-adjust: 0 !default;

@import 'highway-var.scss';
@import 'series-a.scss';

$A: 1.0 / ($font-line-height + $font-padding-top);
$B: $font-line-height;
$C: calc(1em * #{$font-padding-top});

$blade: #bbbbbb;
$green: #009900;
$block-number-decal: #008f00;

.ss {
    text-align: center;
    font-size: 8em;
}
.ss__extruded-blank {
    display: inline-block;
    height: 1em;
    width: calc(1em/6.75 * 30);
    @for $i from 6 through 14 {
        $inches: $i * 3;
        .ss--blank-size-#{$inches} & {
            width: calc(1em * #{$inches} / 6.75);
        }
    }
    position: relative;
    background-color: $blade;
    &::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: block;
        background-image: linear-gradient(
            to bottom,
            transparent       calc(100% / 9),
            rgba(black, 0.2)  calc(100% / 9 + 1%),
            rgba(black, 0.2)  calc(100% / 9 + 3%),
            transparent       calc(100% / 9 + 4%),
            transparent       calc(100% * 8/9 - 4%),
            rgba(white, 0.5)  calc(100% * 8/9 - 3%),
            rgba(white, 0.5)  calc(100% * 8/9 - 1%),
            transparent       calc(100% * 8/9)
        );
        z-index: 1;
        pointer-events: none;
    }
}

.ss__main-decal {
    font-size: calc(100% / 6.75 * 4);

    position: absolute;
    left:   calc(1em/4 * .75);
    right:  calc(1em/4 * .75);
    height: calc(1em/4 * 5.25);
    top:    calc(1em/4 * .75);
    bottom: calc(1em/4 * .75);
    border: calc(1em/4 * .25) solid white;
    background-color: $green;
}

.ss__layout {
    position: absolute;
    left: 0;
    right: 0;
    height: 1em;
    top: 50%;
    transform: translateY(-50%);
    .ss__layout__direction {
        display: flex;
        position: relative;
    }
    .ss__layout__street-name {
        position: relative;
    }
    .ss__layout__street-type {
        position: relative;
    }
    .ss__layout__block-number {
        position: relative;
    }
}

.ss__layout--grid {
    display: inline-grid;
    grid-template-rows: auto 1fr auto;
    grid-template-areas: '. street-name . street-type . '
                         '. street-name . .           . '
                         '. street-name . block-number .';
    grid-template-columns: 1fr auto 1fr auto 1fr;
    @at-root .ss--with-direction & {
        grid-template-areas: '. direction . street-name . street-type  .'
                             '. direction . street-name . .            .'
                             '. direction . street-name . block-number .';
        grid-template-columns: 1fr auto 1fr auto 1fr auto 1fr;
    }
    align-items: center;
    align-content: space-between;
    .ss__layout__direction {
        grid-area: direction;
        align-self: center;
        justify-self: center;
    }
    .ss__layout__street-name {
        grid-area: street-name;
        align-items: center;
        align-self: center;
        justify-self: center;
    }
    .ss__layout__street-type {
        grid-area: street-type;
        align-self: start;
        justify-self: center;
    }
    .ss__layout__block-number-blank {
        grid-area: block-number;
        align-self: end;
        justify-self: center;
    }
    .ss__layout__block-number-decal {
        grid-area: block-number;
        align-self: end;
        justify-self: center;
    }
}

.ss__direction-wrapper {
    height: calc(1em/4 * 4);
    width:  calc(1em/4 * 4);
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
    > .ss__direction {

        font-size: calc(100% / 4 * 1.5 * #{$A});
        &.ss__direction--2-character {
            font-size: calc(100% / 4 * 1.25 * #{$A});
        }
        line-height: $B;
        padding-top: $C;

        font-family: 'Series C';
        font-variation-settings: 'wdth' 150;
        color: $green;
        position: absolute;
        left: 0; width: 100%;
        top: 50%; transform: translateY(-50%);
    }
}
.ss__street-name {
    font-family: 'Series B';
    font-variation-settings: 'wdth' 100;

    font-size: calc(100% * #{$A});
    .ss--small-text & {
        font-size: calc(100% * 3/4 * #{$A});
    }
    line-height: $B;
    padding-top: $C;

    .ss--series-a & {
        font-family: 'Series A';
    }
    .ss--series-c & {
        font-family: 'Series C';
        font-variation-settings: 'wdth' 150;
    }
    .ss--series-d & {
        font-family: 'Series D';
        font-variation-settings: 'wdth' 200;
    }
    color: white;
    display: block;
    letter-spacing: 0;
    sup {
        font-size: 50%;
        letter-spacing: 0;
        margin-left: 0.125em;
        vertical-align: baseline;
        position: relative;
        top: -$sup-adjust * 1em;
    }
}

.ss__street-type {
    font-family: 'Series D';
    font-variation-settings: 'wdth' 200;

    font-size: calc(100% / 4 * #{$A});
    line-height: $B;
    padding-top: $C;

    color: white;
    display: block;
}

.ss__block-number-blank {
    display: block;
    min-width: calc(1em / 4 * 7.5);
    height: calc(1em / 4 * 2.75);
    background-color: white;
    border-radius: calc(1em / 4 * 0.25);
    margin-left: calc(1em / 4 * #{(8.25 - 7.5) / 2});
    margin-right: calc(1em / 4 * #{(8.25 - 7.5) / 2});
}

.ss__block-number-decal {
    min-width: calc(1em / 4 * 8.25);
    padding-left: calc(1em / 4 * #{(8.25 - 7.5) / 2});
    padding-right: calc(1em / 4 * #{(8.25 - 7.5) / 2});
    background-color: $block-number-decal;
    height: calc(1em / 4 * 3);
    margin-top: calc(-1em / 4 * 0.125);
    margin-bottom: calc(-1em / 4 * 0.125);
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0px 1px 1px rgba(black, 0.5);
    @at-root .ss--with-no-block-number & {
        display: none;
    }
}

.ss__block-number-border {
    display: block;
    min-width: calc(1em / 4 * 7.5);
    height: calc(1em / 4 * 2.75);
    border: calc(1em / 4 * 0.125) solid white;
    border-radius: calc(1em / 4 * 0.25);
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.ss__block-number {
    display: block;
    font-family: 'Series C';
    font-variation-settings: 'wdth' 150;

    font-size: calc(1em / 4 * 2 * #{$A});
    line-height: $B;
    padding-top: $C;

    color: white;
}

.ss__block-number-wrapper {
    display: block;
    min-width: calc(1em / 4 * 8.25);
}

#concave-diamond-path {
    width: 1em;
    height: 1em;
    fill: white;
}
